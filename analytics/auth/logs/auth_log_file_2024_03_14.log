14-Mar-24 09:52:58 INFO [authentication.py] login_for_access_token
14-Mar-24 09:52:58 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 09:52:58 INFO [authbearer.py] user found
14-Mar-24 09:52:58 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 09:52:58 INFO [h11_impl.py] 192.168.150.14:53696 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 09:52:58 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 79, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 09:54:36 INFO [server.py] Shutting down
14-Mar-24 09:54:36 INFO [server.py] Waiting for connections to close. (CTRL+C to force quit)
14-Mar-24 10:58:23 INFO [server.py] Finished server process [141897]
14-Mar-24 10:58:23 ERROR [on.py] Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 686, in lifespan
    await receive()
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/usr/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

14-Mar-24 14:10:03 INFO [authentication.py] login_for_access_token
14-Mar-24 14:10:03 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:10:03 INFO [authbearer.py] user found
14-Mar-24 14:10:03 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:10:03 INFO [h11_impl.py] 192.168.150.14:56218 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 14:10:03 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 79, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 14:12:19 INFO [server.py] Shutting down
14-Mar-24 14:12:19 INFO [server.py] Waiting for connections to close. (CTRL+C to force quit)
14-Mar-24 14:15:08 INFO [on.py] Waiting for application shutdown.
14-Mar-24 14:15:08 INFO [on.py] Application shutdown complete.
14-Mar-24 14:15:08 INFO [server.py] Finished server process [192163]
14-Mar-24 14:21:54 INFO [authentication.py] login_for_access_token
14-Mar-24 14:21:54 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:21:54 INFO [authbearer.py] user found
14-Mar-24 14:21:54 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:21:54 INFO [authbearer.py] create access token
14-Mar-24 14:21:54 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 21, 54, 44512), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:21:54 INFO [authbearer.py] None
14-Mar-24 14:21:54 INFO [authbearer.py] HS256
14-Mar-24 14:21:54 INFO [h11_impl.py] 192.168.150.14:56365 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 14:21:54 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 84, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 14:24:58 INFO [h11_impl.py] 192.168.150.14:56405 - "GET /docs HTTP/1.1" 200
14-Mar-24 14:24:58 INFO [h11_impl.py] 192.168.150.14:56405 - "GET /openapi.json HTTP/1.1" 200
14-Mar-24 14:25:31 INFO [authentication.py] login_for_access_token
14-Mar-24 14:25:31 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:25:31 INFO [authbearer.py] user found
14-Mar-24 14:25:31 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:25:31 INFO [authbearer.py] create access token
14-Mar-24 14:25:31 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 25, 31, 746195), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:25:31 INFO [authbearer.py] None
14-Mar-24 14:25:31 INFO [authbearer.py] HS256
14-Mar-24 14:25:31 INFO [h11_impl.py] 192.168.150.14:56415 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 14:25:31 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 84, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 14:27:08 INFO [h11_impl.py] 192.168.150.14:56434 - "GET /docs HTTP/1.1" 200
14-Mar-24 14:27:08 INFO [h11_impl.py] 192.168.150.14:56434 - "GET /openapi.json HTTP/1.1" 200
14-Mar-24 14:27:20 INFO [authentication.py] login_for_access_token
14-Mar-24 14:27:20 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:27:20 INFO [authbearer.py] user found
14-Mar-24 14:27:20 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:27:20 INFO [authbearer.py] create access token
14-Mar-24 14:27:20 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 27, 20, 862987), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:27:20 INFO [authbearer.py] None
14-Mar-24 14:27:20 INFO [authbearer.py] HS256
14-Mar-24 14:27:20 INFO [h11_impl.py] 192.168.150.14:56440 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 14:27:20 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 84, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 14:27:43 INFO [h11_impl.py] 192.168.150.14:56447 - "GET /docs HTTP/1.1" 200
14-Mar-24 14:27:43 INFO [h11_impl.py] 192.168.150.14:56447 - "GET /openapi.json HTTP/1.1" 200
14-Mar-24 14:27:56 INFO [authentication.py] login_for_access_token
14-Mar-24 14:27:56 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:27:56 INFO [authbearer.py] user found
14-Mar-24 14:27:56 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:27:56 INFO [authbearer.py] create access token
14-Mar-24 14:27:56 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 27, 56, 737984), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:27:56 INFO [authbearer.py] None
14-Mar-24 14:27:56 INFO [authbearer.py] HS256
14-Mar-24 14:27:56 INFO [h11_impl.py] 192.168.150.14:56450 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 14:27:56 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 84, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 14:28:34 INFO [server.py] Shutting down
14-Mar-24 14:28:34 INFO [on.py] Waiting for application shutdown.
14-Mar-24 14:28:34 INFO [on.py] Application shutdown complete.
14-Mar-24 14:28:34 INFO [server.py] Finished server process [194283]
14-Mar-24 14:29:46 INFO [authentication.py] login_for_access_token
14-Mar-24 14:29:46 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:29:46 INFO [authbearer.py] user found
14-Mar-24 14:29:46 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:29:46 INFO [authbearer.py] create access token
14-Mar-24 14:29:46 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 29, 46, 407530), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:29:46 INFO [authbearer.py] e19ed9473bb90bf9e878515baa1c1f4a21ac327b48224a068b3ba7b5df4d3ffa
14-Mar-24 14:29:46 INFO [authbearer.py] HS256
14-Mar-24 14:29:46 INFO [authentication.py] User authenticated successfully: user1
14-Mar-24 14:29:46 INFO [h11_impl.py] 192.168.150.14:56480 - "POST /generate_token HTTP/1.1" 200
14-Mar-24 14:30:59 INFO [server.py] Shutting down
14-Mar-24 14:30:59 INFO [on.py] Waiting for application shutdown.
14-Mar-24 14:30:59 INFO [on.py] Application shutdown complete.
14-Mar-24 14:30:59 INFO [server.py] Finished server process [196019]
14-Mar-24 14:32:09 INFO [authentication.py] login_for_access_token
14-Mar-24 14:32:09 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:32:09 INFO [authbearer.py] user found
14-Mar-24 14:32:09 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:32:09 INFO [authbearer.py] create access token
14-Mar-24 14:32:09 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 32, 9, 966949), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:32:09 INFO [authbearer.py] None
14-Mar-24 14:32:09 INFO [authbearer.py] HS256
14-Mar-24 14:32:09 INFO [h11_impl.py] 192.168.150.14:56517 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 14:32:09 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 27, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 84, in create_access_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, ALGORITHM)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jwt.py", line 73, in encode
    return api_jws.encode(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/api_jws.py", line 160, in encode
    key = alg_obj.prepare_key(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/algorithms.py", line 265, in prepare_key
    key_bytes = force_bytes(key)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value
14-Mar-24 14:32:10 INFO [es_visualization.py] Average values of pollutants and aqi data processing completed.
14-Mar-24 14:32:10 INFO [h11_impl.py] 192.168.0.100:59404 - "GET /monthly_average_values_of_pollutants_and_aqi?start_date=2024-01&end_date=2024-03&page=2&rows_per_page=1000 HTTP/1.1" 200
14-Mar-24 14:57:47 INFO [authentication.py] login_for_access_token
14-Mar-24 14:57:47 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 14:57:47 INFO [authbearer.py] user found
14-Mar-24 14:57:47 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 14:57:47 INFO [authbearer.py] create access token
14-Mar-24 14:57:47 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 9, 57, 47, 969860), 'sub': "{'sub': 'user1'}"}
14-Mar-24 14:57:47 INFO [authbearer.py] e19ed9473bb90bf9e878515baa1c1f4a21ac327b48224a068b3ba7b5df4d3ffa
14-Mar-24 14:57:47 INFO [authbearer.py] HS256
14-Mar-24 14:57:47 INFO [authentication.py] User authenticated successfully: user1
14-Mar-24 14:57:47 INFO [h11_impl.py] 192.168.150.14:56807 - "POST /generate_token HTTP/1.1" 200
14-Mar-24 15:03:10 INFO [authentication.py] login_for_access_token
14-Mar-24 15:03:10 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 15:03:10 INFO [authbearer.py] user found
14-Mar-24 15:03:10 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 15:03:10 INFO [authbearer.py] create access token
14-Mar-24 15:03:10 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 10, 3, 10, 163005), 'sub': "{'sub': 'user1'}"}
14-Mar-24 15:03:10 INFO [h11_impl.py] 192.168.150.14:56877 - "POST /generate_token HTTP/1.1" 500
14-Mar-24 15:03:10 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
  File "/opt/siap/analytics/auth/authentication.py", line 26, in login_for_access_token
    access_token = create_access_token(
  File "/opt/siap/analytics/auth/authbearer.py", line 76, in create_access_token
    logging.info(SECRET_KEY)
NameError: name 'SECRET_KEY' is not defined
14-Mar-24 15:04:02 INFO [server.py] Shutting down
14-Mar-24 15:04:02 INFO [server.py] Waiting for connections to close. (CTRL+C to force quit)
14-Mar-24 15:04:05 INFO [on.py] Waiting for application shutdown.
14-Mar-24 15:04:05 INFO [on.py] Application shutdown complete.
14-Mar-24 15:04:05 INFO [server.py] Finished server process [206790]
14-Mar-24 15:05:24 INFO [authentication.py] login_for_access_token
14-Mar-24 15:05:24 INFO [authbearer.py] Authenticating user: user1
14-Mar-24 15:05:24 INFO [authbearer.py] user found
14-Mar-24 15:05:24 INFO [authbearer.py] User authenticated successfully: user1
14-Mar-24 15:05:24 INFO [authbearer.py] create access token
14-Mar-24 15:05:24 INFO [authbearer.py] {'exp': datetime.datetime(2024, 3, 14, 10, 5, 24, 443131), 'sub': "{'sub': 'user1'}"}
14-Mar-24 15:05:24 INFO [authbearer.py] HS256
14-Mar-24 15:05:24 INFO [authentication.py] User authenticated successfully: user1
14-Mar-24 15:05:24 INFO [h11_impl.py] 192.168.150.14:56912 - "POST /generate_token HTTP/1.1" 200
