25-Apr-24 12:46:29 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:46:29 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:46:30 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17437
-1          28
25-Apr-24 12:46:30 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:46:30 INFO [h11_impl.py] 192.168.150.10:58155 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 500
25-Apr-24 12:46:30 ERROR [h11_impl.py] Exception in ASGI application
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/encoders.py", line 230, in jsonable_encoder
    data = dict(obj)
TypeError: 'numpy.int64' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/encoders.py", line 235, in jsonable_encoder
    data = vars(obj)
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/applications.py", line 289, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 291, in app
    content = await serialize_response(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/routing.py", line 179, in serialize_response
    return jsonable_encoder(response_content)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/encoders.py", line 195, in jsonable_encoder
    encoded_value = jsonable_encoder(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/encoders.py", line 239, in jsonable_encoder
    return jsonable_encoder(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/encoders.py", line 195, in jsonable_encoder
    encoded_value = jsonable_encoder(
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/fastapi/encoders.py", line 238, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'numpy.int64' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
25-Apr-24 12:48:41 INFO [server.py] Shutting down
25-Apr-24 12:48:41 INFO [on.py] Waiting for application shutdown.
25-Apr-24 12:48:41 INFO [on.py] Application shutdown complete.
25-Apr-24 12:48:41 INFO [server.py] Finished server process [3313780]
25-Apr-24 12:49:44 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:49:44 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:49:45 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17437
-1          28
25-Apr-24 12:49:45 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:49:45 INFO [h11_impl.py] 192.168.150.10:58237 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:50:40 INFO [server.py] Shutting down
25-Apr-24 12:50:40 INFO [on.py] Waiting for application shutdown.
25-Apr-24 12:50:40 INFO [on.py] Application shutdown complete.
25-Apr-24 12:50:40 INFO [server.py] Finished server process [3322732]
25-Apr-24 12:51:42 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:51:42 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:51:43 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:51:43 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:51:43 INFO [h11_impl.py] 192.168.150.10:58283 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:52:19 INFO [server.py] Shutting down
25-Apr-24 12:52:19 INFO [on.py] Waiting for application shutdown.
25-Apr-24 12:52:19 INFO [on.py] Application shutdown complete.
25-Apr-24 12:52:19 INFO [server.py] Finished server process [3323011]
25-Apr-24 12:53:15 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:53:15 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:53:16 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17439
-1          26
25-Apr-24 12:53:16 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:53:16 INFO [h11_impl.py] 192.168.150.10:58324 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:53:31 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:53:31 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:53:32 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17439
-1          26
25-Apr-24 12:53:32 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:53:32 INFO [h11_impl.py] 192.168.150.10:58330 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:53:34 INFO [h11_impl.py] 192.168.150.10:58330 - "GET /docs HTTP/1.1" 200
25-Apr-24 12:53:35 INFO [h11_impl.py] 192.168.150.10:58330 - "GET /openapi.json HTTP/1.1" 200
25-Apr-24 12:53:39 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:53:39 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:53:40 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:53:40 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:53:40 INFO [h11_impl.py] 192.168.150.10:58334 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:53:45 INFO [h11_impl.py] 192.168.150.10:58340 - "GET /docs HTTP/1.1" 200
25-Apr-24 12:53:45 INFO [h11_impl.py] 192.168.150.10:58342 - "GET /openapi.json HTTP/1.1" 200
25-Apr-24 12:53:49 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:53:49 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:53:50 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17444
-1          21
25-Apr-24 12:53:50 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:53:50 INFO [h11_impl.py] 192.168.150.10:58342 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:54:00 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:54:00 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:54:01 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:54:01 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:54:01 INFO [h11_impl.py] 192.168.150.10:58358 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:54:04 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:54:04 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:54:05 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:54:05 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:54:05 INFO [h11_impl.py] 192.168.150.10:58358 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:54:06 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:54:06 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:54:08 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:54:08 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:54:08 INFO [h11_impl.py] 192.168.150.10:58361 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:54:10 INFO [h11_impl.py] 192.168.150.10:58361 - "GET /docs HTTP/1.1" 200
25-Apr-24 12:54:10 INFO [h11_impl.py] 192.168.150.10:58361 - "GET /openapi.json HTTP/1.1" 200
25-Apr-24 12:54:14 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:54:14 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:54:15 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:54:15 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:54:15 INFO [h11_impl.py] 192.168.150.10:58364 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 12:55:58 INFO [server.py] Shutting down
25-Apr-24 12:55:58 INFO [on.py] Waiting for application shutdown.
25-Apr-24 12:55:58 INFO [on.py] Application shutdown complete.
25-Apr-24 12:55:58 INFO [server.py] Finished server process [3323216]
25-Apr-24 12:56:55 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 12:56:55 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 12:56:56 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 12:56:56 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 12:56:56 INFO [h11_impl.py] 192.168.150.10:58428 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 14:49:04 INFO [server.py] Shutting down
25-Apr-24 14:49:04 INFO [on.py] Waiting for application shutdown.
25-Apr-24 14:49:04 INFO [on.py] Application shutdown complete.
25-Apr-24 14:49:04 INFO [server.py] Finished server process [3323918]
25-Apr-24 15:10:57 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:10:57 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:10:58 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:10:58 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:10:58 INFO [h11_impl.py] 192.168.150.10:60695 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:12:44 INFO [server.py] Shutting down
25-Apr-24 15:12:44 INFO [on.py] Waiting for application shutdown.
25-Apr-24 15:12:44 INFO [on.py] Application shutdown complete.
25-Apr-24 15:12:44 INFO [server.py] Finished server process [3335450]
25-Apr-24 15:16:26 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:16:26 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:16:27 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:16:27 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:16:27 INFO [h11_impl.py] 192.168.0.100:40572 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:16:52 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:16:53 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:16:54 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:16:54 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:16:54 INFO [h11_impl.py] 192.168.150.10:61054 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:16:57 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:16:57 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:16:58 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:16:58 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:16:58 INFO [h11_impl.py] 192.168.150.10:61056 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:17:00 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:17:00 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:17:01 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:17:01 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:17:01 INFO [h11_impl.py] 192.168.150.10:61059 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:17:02 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:17:02 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:17:03 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:17:03 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:17:03 INFO [h11_impl.py] 192.168.150.10:61059 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:17:06 INFO [h11_impl.py] 192.168.150.10:61064 - "GET /docs HTTP/1.1" 200
25-Apr-24 15:17:06 INFO [h11_impl.py] 192.168.150.10:61064 - "GET /openapi.json HTTP/1.1" 200
25-Apr-24 15:17:11 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:17:11 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:17:12 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:17:12 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:17:12 INFO [h11_impl.py] 192.168.150.10:61066 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 15:17:15 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 15:17:15 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 15:17:17 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 15:17:17 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 15:17:17 INFO [h11_impl.py] 192.168.150.10:61068 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
25-Apr-24 16:17:23 INFO [server.py] Shutting down
25-Apr-24 16:17:23 INFO [on.py] Waiting for application shutdown.
25-Apr-24 16:17:23 INFO [on.py] Application shutdown complete.
25-Apr-24 16:17:23 INFO [server.py] Finished server process [3339058]
25-Apr-24 16:53:45 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 16:53:45 ERROR [ahu_anomaly_detection.py] Exception occurred: file_decrypt() missing 1 required positional argument: 'key'
Traceback (most recent call last):
  File "/opt/siap/analytics/ahu/router/ahu_anomaly_detection.py", line 21, in RA_temp_anomaly_detection
    processed_data_csv = file_decrypt(config.CSV_FILE_PATH['upload_file_path']+config.DATA_FILE_NAMES['processed_data_csv_file_name'])
TypeError: file_decrypt() missing 1 required positional argument: 'key'
25-Apr-24 16:53:45 INFO [h11_impl.py] 192.168.0.100:57162 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 500
25-Apr-24 16:53:48 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 16:53:48 ERROR [ahu_anomaly_detection.py] Exception occurred: file_decrypt() missing 1 required positional argument: 'key'
Traceback (most recent call last):
  File "/opt/siap/analytics/ahu/router/ahu_anomaly_detection.py", line 21, in RA_temp_anomaly_detection
    processed_data_csv = file_decrypt(config.CSV_FILE_PATH['upload_file_path']+config.DATA_FILE_NAMES['processed_data_csv_file_name'])
TypeError: file_decrypt() missing 1 required positional argument: 'key'
25-Apr-24 16:53:48 INFO [h11_impl.py] 192.168.0.100:57164 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 500
25-Apr-24 16:54:23 INFO [server.py] Shutting down
25-Apr-24 16:54:23 INFO [on.py] Waiting for application shutdown.
25-Apr-24 16:54:23 INFO [on.py] Application shutdown complete.
25-Apr-24 16:54:23 INFO [server.py] Finished server process [3360254]
25-Apr-24 16:55:21 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 16:55:21 ERROR [ahu_anomaly_detection.py] Exception occurred: 
Traceback (most recent call last):
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/cryptography/fernet.py", line 113, in _get_unverified_token_data
    data = base64.urlsafe_b64decode(token)
  File "/usr/lib/python3.10/base64.py", line 133, in urlsafe_b64decode
    return b64decode(s)
  File "/usr/lib/python3.10/base64.py", line 87, in b64decode
    return binascii.a2b_base64(s)
binascii.Error: Invalid base64-encoded string: number of data characters (331841) cannot be 1 more than a multiple of 4

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/siap/analytics/ahu/router/ahu_anomaly_detection.py", line 21, in RA_temp_anomaly_detection
    processed_data_csv = file_decrypt(config.CSV_FILE_PATH['upload_file_path']+config.DATA_FILE_NAMES['processed_data_csv_file_name'],key)
  File "/opt/siap/analytics/utils/file_operations.py", line 196, in file_decrypt
    decrypted_data = fernet.decrypt(encrypted)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/cryptography/fernet.py", line 84, in decrypt
    timestamp, data = Fernet._get_unverified_token_data(token)
  File "/opt/siap/analytics/analytics_env/lib/python3.10/site-packages/cryptography/fernet.py", line 115, in _get_unverified_token_data
    raise InvalidToken
cryptography.fernet.InvalidToken
25-Apr-24 16:55:21 INFO [h11_impl.py] 192.168.0.100:43734 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 500
25-Apr-24 17:03:00 INFO [ahu_anomaly_detection.py] Loading csv file
25-Apr-24 17:03:00 INFO [ahu_anomaly_detection.py] Detecting anomalies
25-Apr-24 17:03:01 INFO [ahu_anomaly_detection.py]          count
Anomaly       
 1       17438
-1          27
25-Apr-24 17:03:01 INFO [ahu_anomaly_detection.py] Storing the result as json file
25-Apr-24 17:03:01 INFO [h11_impl.py] 192.168.0.100:57110 - "POST /AHU_RA_Temp_Anomaly_Detection HTTP/1.1" 200
